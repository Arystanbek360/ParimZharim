# Документация для модуля Identity and Access Management (IDM)

## Введение
Данный раздел документации описывает переменные окружения, связанные с модулем Identity and Access Management (IDM), который отвечает за аутентификацию и авторизацию пользователей. Эти переменные используются для настройки параметров отправки и ограничения частоты отправки SMS-кодов верификации.

## Переменные окружения модуля IDM

### 1. IDM_PHONE_VERIFICATION_CODE_SEND_INTERVAL_LIMIT
- **Описание**: Эта переменная задает минимальный временной интервал (в секундах) между отправками SMS-сообщений с кодом верификации одному и тому же пользователю.
- **Стандартное значение**: `60` секунд.
- **Использование**: Помогает предотвратить спам и уменьшает риск злоупотребления функцией отправки кодов подтверждения.

### 2. IDM_PHONE_VERIFICATION_CODE_RATE_LIMIT_PER_USER_PER_DAY
- **Описание**: Определяет максимальное количество SMS-сообщений с кодами верификации, которые могут быть отправлены одному пользователю в течение одного дня.
- **Стандартное значение**: `5`.
- **Использование**: Ограничивает количество попыток отправки кода для одного пользователя, уменьшая риск злоупотребления услугой и потенциальной угрозы безопасности.

### 3. IDM_PHONE_VERIFICATION_CODE_RATE_LIMIT_PER_ALL_USERS_PER_DAY
- **Описание**: Устанавливает общее ограничение на количество SMS-сообщений с кодами верификации, которые могут быть отправлены всем пользователям в течение одного дня.
- **Стандартное значение**: `25`.
- **Использование**: Предотвращает избыточное использование ресурсов системы и помогает в управлении затратами на SMS-сервисы.

### 4. IDM_SMSC_LOGIN
- **Описание**: Логин для доступа к сервису SMSC, который используется для аутентификации в системе SMSC при отправке SMS-сообщений.
- **Стандартное значение**: По умолчанию не установлено.
- **Использование**: Необходим для настройки интеграции вашего приложения с SMSC и авторизации запросов на отправку сообщений.

### 5. IDM_SMSC_PASSWORD
- **Описание**: Пароль для доступа к сервису SMSC. Используется вместе с логином для обеспечения безопасности отправки сообщений через SMSC.
- **Стандартное значение**: По умолчанию не установлено.
- **Использование**:  Обеспечивает безопасность доступа к сервису SMSC, используется в комбинации с логином для аутентификации.

### 6. IDM_MOBIZONE_TOKEN
- **Описание**: Токен для интеграции с сервисом Mobizone, предоставляющим возможности SMS-рассылок. Токен используется для аутентификации запросов на отправку SMS через Mobizone.
- **Стандартное значение**:  По умолчанию не установлено.
- **Использование**:  Позволяет вашему приложению автоматически управлять SMS-уведомлениями через Mobizone, обеспечивая безопасную и надёжную отправку сообщений.

## Пример использования в конфигурационном файле
Переменные окружения используются для настройки параметров IDM в конфигурационном файле `config/app.php` вашего приложения Laravel. Пример конфигурации:

```php
'idm_phone_verification_code_send_interval_limit' => env('IDM_PHONE_VERIFICATION_CODE_SEND_INTERVAL_LIMIT', 60),
'idm_phone_verification_code_rate_limit_per_user_per_day' => env('IDM_PHONE_VERIFICATION_CODE_RATE_LIMIT_PER_USER_PER_DAY', 5),
'idm_phone_verification_code_rate_limit_per_all_users_per_day' => env('IDM_PHONE_VERIFICATION_CODE_RATE_LIMIT_PER_ALL_USERS_PER_DAY', 25),
```

## Пример использования в коде
Чтобы получить доступ к значению ограничения отправки SMS-сообщений для всех пользователей в день, используйте следующий код:

```php
// Получение значения лимита отправки SMS для всех пользователей в день из конфигурационного файла
$rateLimitForAllUsers = config('app.idm_phone_verification_code_rate_limit_per_all_users_per_day');
```

Это позволит вам динамически управлять параметрами верификации пользователя в зависимости от настроек в вашем файле конфигурации.

## Лучшие практики
- **Безопасность**: Установите разумные ограничения, чтобы защитить вашу систему от злоупотреблений и атак.
- **Мониторинг**: Регулярно проверяйте активность отправки SMS для оптимизации установленных лимитов.
- **Обновление**: При изменении бизнес-требований или правил регулирования обновляйте ограничения соответствующим образом.
