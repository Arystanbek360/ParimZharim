## Разлогин пользователя через API

### Описание

**Цель**: Тестирование функции разлогина пользователя через API.

Тестирование включает проверку разлогина с текущего устройства, с указанного устройства и со всех устройств, а также корректность удаления данных из базы данных.

### Предусловия и необходимые инструменты

- Доступ к базе данных (таблица `idm_personal_access_tokens`).
- Инструмент для тестирования API, например, Postman.
- Авторизованный пользователь, получивший токен с помощью test-case-1 и TestCase 2.

### Тестовые данные

- Токен авторизованного пользователя: "valid_token".
- Device ID: "device123".

### Шаги

#### Шаг 1: Разлогин с текущего устройства
Отправить POST-запрос на адрес `/api/idm/logout-current-device` с заголовком `Authorization: Bearer valid_token`.
**Ожидаемый результат**: Разлогин успешен, код ответа 200. Запись для текущего устройства удалена из таблицы `idm_personal_access_tokens`.

#### Шаг 2: Разлогин с указанного устройства
Отправить POST-запрос на адрес `/api/idm/logout-device` с body:
```json
{
  "device_id": "device123"
}
```
и заголовком `Authorization: Bearer valid_token`.
**Ожидаемый результат**: Разлогин успешен, код ответа 200. Запись для указанного устройства удалена из таблицы `idm_personal_access_tokens`.

#### Шаг 3: Разлогин со всех устройств
Отправить POST-запрос на адрес `/api/idm/logout-all-devices` с заголовком `Authorization: Bearer valid_token`.
**Ожидаемый результат**: Разлогин успешен, код ответа 200. Все записи для пользователя удалены из таблицы `idm_personal_access_tokens`.

#### Шаг 4: Разлогин без авторизации (текущего устройства)
Отправить POST-запрос на адрес `/api/idm/logout-current-device` без заголовка `Authorization`.
**Ожидаемый результат**: Ошибка, код ответа 401 (Unauthorized), запись в таблице `idm_personal_access_tokens` не изменена.

#### Шаг 5: Разлогин без авторизации (указанного устройства)
Отправить POST-запрос на адрес `/api/idm/logout-device` с body:
```json
{
  "device_id": "device123"
}
```
без заголовка `Authorization`.
**Ожидаемый результат**: Ошибка, код ответа 401 (Unauthorized), запись в таблице `idm_personal_access_tokens` не изменена.

#### Шаг 6: Разлогин без авторизации (всех устройств)
Отправить POST-запрос на адрес `/api/idm/logout-all-devices` без заголовка `Authorization`.
**Ожидаемый результат**: Ошибка, код ответа 401 (Unauthorized), запись в таблице `idm_personal_access_tokens` не изменена.

### Постусловия

- Проверить, что данные пользователя в таблице `idm_personal_access_tokens` корректно удалены после успешного теста.
- Удалить тестовые данные из таблицы `idm_personal_access_tokens`, если это необходимо.

### Замечания/Примечания

- Необходимо убедиться, что коды ответов сервера и сообщения об ошибках соответствуют ожидаемым результатам.
- Проверить логирование событий для анализа возможных ошибок.
