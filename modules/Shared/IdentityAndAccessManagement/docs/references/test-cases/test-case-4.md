## Обновление данных пользователя через API

### Описание

**Цель**: Тестирование функции обновления данных пользователя через API.

Тестирование включает проверку правильности данных, обновление имени пользователя и корректность записей в базе данных.

### Предусловия и необходимые инструменты

- Доступ к базе данных (таблица `idm_users`).
- Инструмент для тестирования API, например, Postman.
- Валидный токен, полученный после выполнения test-case-1 или test-case-2.

### Тестовые данные

- Токен авторизованного пользователя: "valid_token".
- Токен неавторизованного пользователя: "invalid_token".
- Имя для обновления: "New Name".

### Шаги

#### Шаг 1: Успешное обновление имени пользователя
Отправить POST-запрос на адрес `/api/idm/update-profile` с body:

```json
{
  "name": "New Name"
}
```
и заголовком `Authorization: Bearer valid_token`.
Ожидаемый результат: Имя пользователя обновлено, код ответа 200. В ответе присутствует модель пользователя с новым именем. В таблице `idm_users` поле `name` обновлено.

#### Шаг 2: Обновление имени пользователя без авторизации
Отправить POST-запрос на адрес `/api/idm/update-profile` с body:
```json
{
  "name": "New Name"
}
```
и заголовком `Authorization: Bearer invalid_token`.
Ожидаемый результат: Ошибка, код ответа 401 (Unauthorized), имя пользователя не обновлено.

#### Шаг 3: Обновление имени пользователя без поля name
Отправить POST-запрос на адрес `/api/idm/update-profile` с пустым body:
```json
{}
```
и заголовком `Authorization: Bearer valid_token`.
Ожидаемый результат: Ошибка, код ответа 422 (field name is required), имя пользователя не обновлено.

### Постусловия

- Проверить, что данные пользователя в таблице `idm_users` соответствуют обновленным данным после успешного теста.
- Удалить тестовые данные из таблицы `idm_users`, если это необходимо.

### Замечания/Примечания

- Необходимо убедиться, что коды ответов сервера и сообщения об ошибках соответствуют ожидаемым результатам.
- Проверить логирование событий для анализа возможных ошибок.
