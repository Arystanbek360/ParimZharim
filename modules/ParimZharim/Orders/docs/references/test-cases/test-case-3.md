## Получение деталей заказа через API

### Описание

**Цель**: Тестирование получения деталей одного заказа через API для авторизованного клиента.

Проверка процесса получения информации о конкретном заказе и обработка ошибок для различных сценариев.

### Предусловия и необходимые инструменты

- Авторизованный клиент с профилем клиента и заказами.
- Доступ к API по адресу `/api/orders/get-order-by-id`.
- Токен авторизованного клиента.
- Существующий заказ с ID, принадлежащий клиенту.

### Тестовые данные
- Токен клиента с заказами: [токен клиента с заказами].
- Неверный или отсутствующий токен: [неверный токен].
- Существующий заказ ID: 123 (Заменить на реальные данные из базы данных)
- Несуществующий заказ ID: 999. (Заменить на реальные данные из базы данных)
- Заказ, не принадлежащий клиенту ID: 456. (Заменить на реальные данные из базы данных)

### Позитивные кейсы

#### Шаг 1:
Отправить GET-запрос на `/api/orders/get-order-by-id?order-id=123` с токеном клиента.
**Ожидаемый результат**: Возвращается статус-код 200 и подробная информация о заказе:
```json
{
    "date": {
        "booking_date": "2024-06-09",
        "check_in": "20:00:00",
        "hours": 6
    },
    "booking_id": 190,
    "object_name": "Баня №3",
    "object_id": 7,
    "status": "cancelled",
    "persons": {
        "adults": 4,
        "kids": 0
    },
    "payment_method": "kaspi",
    "total": 141900,
    "products": [
        {
            "product_id": 1,
            "product_quantity": 2,
            "product_info": {
                "name": "Микс мясной на компанию",
                "description": "Описание для Микс мясной на компанию",
                "photo": null,
                "price": 24000
            }
        },
        {
            "product_id": 2,
            "product_quantity": 1,
            "product_info": {
                "name": "Нисуаз с тунцом, 300 гр",
                "description": "Описание для Нисуаз с тунцом, 300 гр",
                "photo": null,
                "price": 3400
            }
        }
    ],
    "additional_services": [
        {
            "service_id": 2,
            "quantity": 3,
            "service_info": {
                "name": "Дополнительный час работы",
                "price": 4700
            }
        }
    ],
    "fines": [
        {
            "id": 1,
            "quantity": 1,
            "name": "Штраф за опоздание",
            "price": 4400
        }
    ],
    "notes": "notes"
}
```

### Негативные кейсы

#### Шаг 1:
Отправить GET-запрос на `/api/orders/get-order-by-id?order-id=123` без токена или с неверным токеном.
**Ожидаемый результат**: Возвращается статус-код 401 с сообщением об ошибке "Unauthorized".

#### Шаг 2:
Отправить GET-запрос на `/api/orders/get-order-by-id?order-id=999` с токеном клиента.
**Ожидаемый результат**: Возвращается статус-код 404 с сообщением об ошибке "Order does not belong to this customer".

#### Шаг 3:
Отправить GET-запрос на `/api/orders/get-order-by-id` без указания order_id.
**Ожидаемый результат**: Возвращается статус-код 400 с сообщением об ошибке "Order ID is required".

### Примеры запросов и ответов для негативных кейсов

#### Без токена или с неверным токеном:
GET `/api/orders/get-order-by-id?order-id=123`
Headers:
```
Authorization: Bearer [неверный токен]
```
**Ожидаемый результат**:
```json
{
 "error": "Unauthorized"
}
```

#### Заказ не принадлежит клиенту:
GET `/api/orders/get-order-by-id?order-id=456`
Headers:
```
Authorization: Bearer [токен клиента]
```
**Ожидаемый результат**:
```json
{
    "message": "Order does not belong to this customer",
    "status_code": 404
}
```

#### Без указания order-id:
GET `/api/orders/get-order-by-id`
Headers:
```
Authorization: Bearer [токен клиента]
```
**Ожидаемый результат**:
```json
{
    "message": "Order ID is required",
    "status_code": 400
}
```

### Постусловия

- Убедиться, что данные заказа корректно отображаются для клиентов.

### Замечания/Примечания

- Проверить корректность работы авторизации через токен.
- Убедиться, что система корректно обрабатывает запросы для несуществующих заказов и заказов, не принадлежащих клиенту.
- Проверить, что неавторизованные пользователи получают ошибку 401.
- Проверить, что при отсутствии order_id возвращается ошибка 400.
